<app-navbar-allpages></app-navbar-allpages>
<div class="col-12 mt-5 ">
  <div class="header row  justify-between ">
    <input type="text" class=" fa fa-search border border-primary" #ch placeholder="Filter" style="border-radius: 50px; width: 30%; margin-left: 30%;">
    <button type="submit"  class="bg-indigo-500 text-white rounded-full font-semibold col-1 px-7 py-3 hover:bg-indigo-400 focus:bg-indigo-600 focus:outline-none">Search</button>
    <button class="btn btn-secondary col-2 flex align-items-end" (click)="add()" data-bs-toggle="modal" data-bs-target="#exampleModal" ><i class="fa fa-plus"></i> Add Service</button>
  </div>
</div>
<table class="table ">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">price</th>
      <th scope="col">description</th>
      <th scope="col">category</th>
      <th scope="col">Location</th>
       <th scope="col">document</th>
      <th scope="col">contactInfo</th>
      <th scope="col">image</th>
      <th scope="col">Action</th>

    </tr>
  </thead>
  <tbody>

    <tr *ngFor="let data of allservice  ;">

      <td>{{data.name}}</td>
      <td>{{data.price}}</td>
      <td>{{data.description}}</td>
       <td>{{data.category}}</td>
      <!-- <td *ngIf="data.category">{{data.category.name}}</td> -->
      <td>{{data.location}}</td>
       <td>{{data.document}}</td>
      <td>{{data.contactInfo}}</td>
      <!-- <td>{{data.isApproved}}</td> -->
      <td><img [src]="'http://localhost:3001/api/services/getimage/' + data._id" width="80" height="80"/></td>
      <td>
          <button class="text-info" (click)="edit(data)"  data-bs-toggle="modal" data-bs-target="#exampleModal"> <i class="fas fa-edit "></i></button>&nbsp;
          <button class="text-danger" (click)="deleteser(data._id)"> <i class="fa fa-trash"></i></button>
      </td>
    </tr>
  </tbody>
</table>
<!-- Modal -->

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div style="background-color:#003049;" class="modal-header">
        <h5 style="color: #fdf0d5; font-size: 26px;" class="modal-title" id="exampleModalLabel">Service Touristique</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form  [formGroup]="formValue" >
          <div class="mb-3" hidden>
            <label for="" class="form-label">id</label>
            <input type="text" formControlName="id" class="form-control" >
          </div>
          <div class="mb-3">
            <label for="" class="form-label">Name</label>
            <input type="text" formControlName="name" class="form-control" >
            <small *ngIf="formValue.get('name')?.invalid && formValue.get('name')?.touched " class="text-danger"> name is required</small>
          </div>
          <div class="mb-3">
            <label for="" class="form-label">price</label>
            <input type="number" formControlName="price" class="form-control"  >
            <small *ngIf="formValue.get('price')?.invalid && formValue.get('price')?.touched " class="text-danger"> price is required</small>
          </div>
          <div class="mb-3">
            <label for="" class="form-label">description</label>
            <input type="text" formControlName="description" class="form-control" >
            <small *ngIf="formValue.get('description')?.invalid && formValue.get('description')?.touched " class="text-danger"> description is required</small>
          </div>
          <div class="mb-3">
            <label for="" class="form-label">Category</label>
            <!-- <select class="form-select" formControlName="Categoryid" name="Category" >
              <option value="option" *ngFor="let category of categorys" [value]="category?.id">{{category?.name}} </option>

            </select> -->
            <input type="text" formControlName="Category"  class="form-control" >
            <small *ngIf="formValue.get('category')?.invalid && formValue.get('category')?.touched " class="text-danger"> category is required</small>
          </div>
          <div class="mb-3">
            <label for="" class="form-label">Location</label>
            <input type="text"formControlName="location" class="form-control"  >
            <small *ngIf="formValue.get('location')?.invalid && formValue.get('location')?.touched " class="text-danger"> location is required</small>
          </div>
           <div class="mb-3">
            <label  class="form-label" >document</label><br>
            <input type="file" class="form-control" >
            <small *ngIf="formValue.get('document')?.invalid && formValue.get('document')?.touched " class="text-danger"> document is required</small>
          </div>
          <div class="mb-3">
            <label class="form-label">contactInfo</label>
            <input type="text" formControlName="contactInfo" class="form-control">
            <small *ngIf="formValue.get('contactInfo')?.invalid && formValue.get('contactInfo')?.touched " class="text-danger"> contact is required</small>
          </div>
          <div class="mb-3">
            <label  class="form-label " >Image</label>
            <input type="file"  class="form-control" (change)="selecteImage($event)"   >
            <small  *ngIf="formValue.get('image')?.invalid && formValue.get('image')?.touched " class="text-danger"> image is required</small>
          </div>

          </form>
      </div>
      <div class="modal-footer">
        <button  id="cancel" class="btn btn-secondary" data-bs-dismiss="modal"> Close</button>
        <button  *ngIf="showadd" class="btn btn-success" (click)="addServicetori()"> add </button>
        <button  *ngIf="showupdate" class="btn btn-success" (click)="update()">  update </button>
      </div>
    </div>
  </div>
</div>
<br>
<br>
<br>
<br>
<br>


